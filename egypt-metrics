#!/usr/bin/perl

use Getopt::Euclid;

=head1 NAME

egypt-metrics - egypt's metric reporting tool

=head1 USAGE

  egypt-metrics [options] <directory> [<directory> ...]

=head1 REQUIRED ARGUMENTS

=over

=item <directory>...

Tells egypt which source code directory(ies) you want to parse.

=back

=head1 OPTIONS

=over

=item --extractor <extractor>

Define wich extractor method use to analise source code. Default is Doxyparse.

=for Euclid:
  extractor.type: string, extractor =~ /\A\w+\Z/
  extractor.default: 'Doxyparse'

When using using GCC extractor, the directories will be parsed to find files
matching *.rtl and *.expand. For info about how to generate those files, please
see Egypt::Extractor::GCC(3).

When using the Doxyparse extractor (default), all files matching the languages
supported by doxyparse are processed.

=back

=head1 COPYRIGHT

Copyright (c) 2009 Antonio Terceiro

This program is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.

=cut

use strict;

use Egypt::Extractor;
use Egypt::Metrics;

my $extractor = Egypt::Extractor->load($ARGV{'--extractor'});
my $metrics = Egypt::Metrics->new(model => $extractor->model);

$extractor->process(@{$ARGV{'<directory>'}});
print $metrics->report;

exit(0);
